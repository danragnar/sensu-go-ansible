

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Preparing a development environment &mdash; Sensu Go Ansible Collection  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Testing Sensu Go Ansible Collection" href="testing.html" />
    <link rel="prev" title="Developing Sensu Go Ansible Collection" href="../hacking.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Sensu Go Ansible Collection
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Using Sensu Go Ansible Collection</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roles.html">Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Hacker's guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../hacking.html">Developing Sensu Go Ansible Collection</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Preparing a development environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtaining-the-source-code">Obtaining the source code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-development-tools">Installing development tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-the-setup">Testing the setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Sensu Go Ansible Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation.html">Documenting Sensu Go Ansible collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html">Releasing the Sensu Go Ansible Collection</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sensu Go Ansible Collection</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../hacking.html">Developing Sensu Go Ansible Collection</a> &raquo;</li>
        
      <li>Preparing a development environment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/sensu/sensu-go-ansible/blob/master/docs/source/hacking/setup.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="preparing-a-development-environment">
<h1>Preparing a development environment<a class="headerlink" href="#preparing-a-development-environment" title="Permalink to this headline">¶</a></h1>
<p>In this guide, we will go through the process of setting up a development
environment.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>There are a few things we will need to have installed on our workstation. They
are, in no particular order:</p>
<blockquote>
<div><ul class="simple">
<li><p>a python 3 interpreter with virtual environment support,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span></code> tools,</p></li>
<li><p>a functioning docker installation (for integration tests), and</p></li>
<li><p>SELinux python bindings (only on systems with SELinux installed).</p></li>
</ul>
</div></blockquote>
<p>It should be relatively straightforward to get those things installed on our
machine. Once we have them ready, we can start customizing our environment for
Ansible development.</p>
</div>
<div class="section" id="obtaining-the-source-code">
<h2>Obtaining the source code<a class="headerlink" href="#obtaining-the-source-code" title="Permalink to this headline">¶</a></h2>
<p>Sensu Go Ansible collection lives on GitHub, which means that we are just one
command away from the full source code. But before we can clone the
repository, we need to create a few directories that will hold the source
code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir -p ansible_collections/sensu
$ cd ansible_collections/sensu
$ git clone git@github.com:sensu/sensu-go-ansible.git sensu_go
$ cd sensu_go
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is vitally important that we</p>
<ol class="arabic simple">
<li><p>create two parent directories before checking out the code, and</p></li>
<li><p>that we clone the code into the <cite>sensu_go</cite> directory.</p></li>
</ol>
<p>Ansible development tools often assume that we are working from the
<code class="docutils literal notranslate"><span class="pre">ansible_collections/&lt;namespace&gt;/&lt;collection&gt;</span></code> directory and complain
loudly if they do not have it their way.</p>
</div>
<p>And this is it.</p>
</div>
<div class="section" id="installing-development-tools">
<h2>Installing development tools<a class="headerlink" href="#installing-development-tools" title="Permalink to this headline">¶</a></h2>
<p>The first thing we need to do is create a new virtual environment and activate
it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m venv ../../../venv
$ . ../../../venv/bin/activate
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We intentionally created our virtual environment outside the collection
directory. This is a simple way of making sure that various static analysis
tools only report issues with our code and not with any of the
dependencies.</p>
</div>
<p>Now we need to install Ansible. Since we are just starting, latest stable
version will do just fine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv) $ pip install ansible
</pre></div>
</div>
<p>All that separates us now from the fully functioning development environment
are a few dependencies. We can install them by running the next command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv) $ make requirements
</pre></div>
</div>
<p>There is just one more thing left for us to do: test the setup.</p>
</div>
<div class="section" id="testing-the-setup">
<h2>Testing the setup<a class="headerlink" href="#testing-the-setup" title="Permalink to this headline">¶</a></h2>
<p>To validate our setup, we can run the bundled tests and render the
documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(venv) $ make sanity
(venv) $ make units
(venv) $ make docs
(venv) $ make -j4 integration
</pre></div>
</div>
<p>We may want to go grab a cup of tea after running that last command, since it
will take a while (about fifteen minutes on a semi-decent development
machine). And if all of the commands finished with no errors, we are ready to
start developing.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="testing.html" class="btn btn-neutral float-right" title="Testing Sensu Go Ansible Collection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../hacking.html" class="btn btn-neutral float-left" title="Developing Sensu Go Ansible Collection" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, XLAB Steampunk

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>